# IYAGI - AI Visual Novel Generator

> **ìµœì†Œí•œì˜ ì…ë ¥ìœ¼ë¡œ ì™„ì „í•œ ë¹„ì£¼ì–¼ë…¸ë²¨ì„ ìë™ ìƒì„±í•˜ëŠ” Unity ê¸°ë°˜ ë„êµ¬**

AIê°€ ì‹œë‚˜ë¦¬ì˜¤, ìºë¦­í„°, ì´ë¯¸ì§€, ì‚¬ìš´ë“œë¥¼ ëª¨ë‘ ìƒì„±í•˜ì—¬ ì¦‰ì‹œ í”Œë ˆì´ ê°€ëŠ¥í•œ ë¹„ì£¼ì–¼ë…¸ë²¨ì„ ë§Œë“­ë‹ˆë‹¤.

**ğŸ¥ [ë°ëª¨ ì˜ìƒ ë³´ê¸°](https://youtu.be/XJAiy67y_GI)**

[![Unity](https://img.shields.io/badge/Unity-2022.3.4f1-black.svg?style=flat&logo=unity)](https://unity.com/)
[![C#](https://img.shields.io/badge/C%23-239120?style=flat&logo=csharp&logoColor=white)](https://docs.microsoft.com/en-us/dotnet/csharp/)
[![Gemini API](https://img.shields.io/badge/Gemini_API-1.5_Flash-blue.svg)](https://ai.google.dev/)

---

## ğŸ“– ëª©ì°¨

- [ì£¼ìš” íŠ¹ì§•](#-ì£¼ìš”-íŠ¹ì§•)
- [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#-ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
- [ê¸°ìˆ  ìŠ¤íƒ](#-ê¸°ìˆ -ìŠ¤íƒ)
- [í•µì‹¬ êµ¬í˜„](#-í•µì‹¬-êµ¬í˜„)
- [ë¹ ë¥¸ ì‹œì‘](#-ë¹ ë¥¸-ì‹œì‘)
- [í”„ë¡œì íŠ¸ êµ¬ì¡°](#-í”„ë¡œì íŠ¸-êµ¬ì¡°)

---

## âœ¨ ì£¼ìš” íŠ¹ì§•

### 1. **ìµœì†Œ ì…ë ¥, ìµœëŒ€ ìƒì„±**
- **ì…ë ¥**: ì œëª© + ì§§ì€ ì¤„ê±°ë¦¬ (2-3ë¬¸ì¥)
- **ìƒì„±**: ì™„ì „í•œ VN (ì‹œë‚˜ë¦¬ì˜¤, ìºë¦­í„°, ì´ë¯¸ì§€, ì‚¬ìš´ë“œ)
- **ì‹œê°„**: ì•½ 10ë¶„ ë‚´ í”Œë ˆì´ ê°€ëŠ¥í•œ ê²Œì„ ì™„ì„±

### 2. **ì¼ê´€ëœ ìºë¦­í„° ë¹„ì£¼ì–¼**
- Seed ê¸°ë°˜ ì´ë¯¸ì§€ ìƒì„±ìœ¼ë¡œ ë™ì¼ ìºë¦­í„° ìœ ì§€
- ìºë¦­í„°ë‹¹ 5ì¢… ê¸°ë³¸ í‘œì • ìë™ ìƒì„±
- ì–¼êµ´ í”„ë¦¬ë·°ë¥¼ CG ë ˆí¼ëŸ°ìŠ¤ë¡œ í™œìš©

### 3. **ë™ì  ìŠ¤í† ë¦¬ ë¶„ê¸°**
- í”Œë ˆì´ì–´ ì„ íƒì— ë”°ë¼ ì‹¤ì‹œê°„ ì±•í„° ìƒì„±
- Core Value System: ì„ íƒì´ ìºë¦­í„° ê°€ì¹˜ê´€ì— ì˜í–¥
- ì±•í„°ë³„ ìë™ ìš”ì•½ìœ¼ë¡œ ì¼ê´€ëœ ìŠ¤í† ë¦¬ ì „ê°œ

### 4. **íš¨ìœ¨ì  ë¦¬ì†ŒìŠ¤ ê´€ë¦¬**
- **Chapter-Level Caching**: í•œ ë²ˆ ìƒì„±í•œ ì±•í„°ëŠ” ì¬ì‚¬ìš©
- **Parallel Asset Generation**: Fan-Out Barrier íŒ¨í„´ìœ¼ë¡œ ë¹ ë¥¸ ìƒì„±
- **Scene-Based Generation**: 3ê°œ ì”¬ìœ¼ë¡œ ë¶„í• í•˜ì—¬ ì•ˆì •ì  ìƒì„±

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Setup Wizard (Editor)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ê²Œì„ ê°œìš”â”‚â†’â”‚ê°€ì¹˜ ì„¤ì •â”‚â†’â”‚êµ¬ì¡° ì„¤ì •â”‚â†’â”‚ìºë¦­í„°   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â†“ Gemini API                â†“ NanoBanana API       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         VNProjectData.asset (ScriptableObject)       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Parallel Asset Generator (Editor)              â”‚
â”‚  Cycle 1 & 2 (ë³‘ë ¬)              Cycle 3                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ìºë¦­í„° ìŠ¤íƒ ë”©    â”‚         â”‚ì±•í„°1 ì—ì…‹ ìƒì„±   â”‚          â”‚
â”‚  â”‚ì±•í„°1 JSON      â”‚         â”‚ë°°ê²½/CG/BGM/SFX  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Runtime Game System                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚      ChapterGenerationManager                         â”‚  â”‚
â”‚  â”‚  - Scene-based generation (6 scenes/chapter)         â”‚  â”‚
â”‚  â”‚  - Chapter-level caching                             â”‚  â”‚
â”‚  â”‚  - Auto summary for context                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                â†“ Gemini API                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         GameController + DialogueUI                  â”‚  â”‚
â”‚  â”‚  - Core Value System (skills â†’ values)               â”‚  â”‚
â”‚  â”‚  - Choice handling & branching                       â”‚  â”‚
â”‚  â”‚  - SaveFile auto-update                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ

| ì˜ì—­ | ê¸°ìˆ  | ì—­í•  |
|------|------|------|
| **ì—”ì§„** | Unity 2022.3.4f1 | ì „ì²´ ê°œë°œ í™˜ê²½ |
| **ì‹œë‚˜ë¦¬ì˜¤ ìƒì„±** | Gemini 1.5 Flash API | í”Œë¡¯, ëŒ€ì‚¬, ë¶„ê¸° ìë™ ìƒì„± |
| **ì´ë¯¸ì§€ ìƒì„±** | NanoBanana API | ìºë¦­í„°/ë°°ê²½/CG ì´ë¯¸ì§€ ìƒì„± |
| **ì˜¤ë””ì˜¤ ìƒì„±** | ElevenLabs API | BGM/SFX ìƒì„± (ì„ íƒ) |
| **ë°ì´í„° ì €ì¥** | ScriptableObject + JSON | í”„ë¡œì íŠ¸ ì„¤ì • ë° ì„¸ì´ë¸Œ ì‹œìŠ¤í…œ |
| **UI** | Unity UI (uGUI) + TextMeshPro | ìœ„ìë“œ ë° ê²Œì„ UI |

---

## âš¡ í•µì‹¬ ê³¼ì œì™€ í•´ê²°

### ë¬¸ì œ: ë‹¤ì¤‘ ê¸°ì¤€ ë¶„ê¸°ì˜ ì¡°í•© í­ë°œ

**ìƒí™©**: AI ìƒì„± VNì—ì„œ ì§„ì •í•œ ë™ì  ìŠ¤í† ë¦¬ë¥¼ ë§Œë“¤ë ¤ë©´ ì—¬ëŸ¬ ê¸°ì¤€ì„ ë™ì‹œì— ê³ ë ¤í•´ì•¼ í•¨
- **Core Values** (ê°€ì¹˜ê´€): ìš©ê¸°, ì§€í˜œ, ìš°ì • ë“± 2-4ê°œ
- **NPC Affection** (í˜¸ê°ë„): ê° NPCë§ˆë‹¤ -100 ~ +100
- **Player Choices** (ì„ íƒ íˆìŠ¤í† ë¦¬): ì´ì „ ì„ íƒë“¤ì˜ ëˆ„ì  íš¨ê³¼

**ë¬¸ì œì˜ ë³¸ì§ˆ**:
```
ì‹œë‚˜ë¦¬ì˜¤ 1 (ì™„ì „ ê³ ì •):
- ëª¨ë“  í”Œë ˆì´ì–´ê°€ ê°™ì€ ìŠ¤í† ë¦¬ ê²½í—˜
- LLMì„ ì“°ëŠ” ì˜ë¯¸ ì—†ìŒ (ë¯¸ë¦¬ ì‘ì„±í•œ ì‹œë‚˜ë¦¬ì˜¤ì™€ ë‹¤ë¥¼ ë°” ì—†ìŒ)
- âŒ "AI ìƒì„±"ì´ë¼ í•  ìˆ˜ ì—†ìŒ

ì‹œë‚˜ë¦¬ì˜¤ 2 (ì™„ì „ ë™ì ):
- Core Values 3ê°œ Ã— NPC 2ëª… = 6ê°œ ìƒíƒœ ì¡°í•©
- ì±•í„° 5ê°œ â†’ 6^5 = 7,776ê°œ ê²½ë¡œ
- âŒ API ë¹„ìš© í­ë°œ, ìºì‹œ ì¬ì‚¬ìš© ë¶ˆê°€, í’ˆì§ˆ ê´€ë¦¬ ë¶ˆê°€ëŠ¥

ì‹œë‚˜ë¦¬ì˜¤ 3 (ì£¼ìš” ì„ íƒ ë¶„ê¸° - ìš°ë¦¬ì˜ ì„ íƒ):
- ê¸°ë³¸ ìŠ¤í† ë¦¬ëŠ” ë™ì¼í•˜ë˜, ì£¼ìš” ì„ íƒ ì‹œì—ë§Œ ë¶„ê¸°
- ì´ë²¤íŠ¸ ê¸°ë°˜ ë¶„ê¸° (ì •ëŸ‰ì  ì ìˆ˜ ë¹„êµ ì•„ë‹˜)
- âœ… LLMì˜ ì¥ì  + ëª°ì…ê° + ì‹¤ìš©ì„± í™•ë³´
```

ìì„¸í•œ ë‚´ìš©ì€ [BRANCHING_SOLUTION.md](BRANCHING_SOLUTION.md)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

---

### í•´ê²°: Major-Choice-Driven Branching (ì£¼ìš” ì„ íƒ ê¸°ë°˜ ë¶„ê¸°)

**í•µì‹¬ ì•„ì´ë””ì–´**: **ê¸°ë³¸ ìŠ¤í† ë¦¬ëŠ” ë™ì¼**, **ì£¼ìš” ì„ íƒ** ì‹œì—ë§Œ ì´ë²¤íŠ¸ ê¸°ë°˜ ë¶„ê¸°

```
Chapter 1: ê³µí†µ í”„ë¡¤ë¡œê·¸ (1ê°œ)
    â†“
Chapter 2:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
ì¼ë°˜ ì„ íƒ              ì£¼ìš” ì„ íƒ (ë°°ì‹ )
(í†µê³„ë§Œ ë³€ê²½)           "betrayed_Ellen"
    â†“                       â†“
Chapter 3:            Chapter 3 (ë°°ì‹  í›„):
ì—˜ëŸ° ì¹œë°€                ì—˜ëŸ° ëƒ‰ë­, ì ëŒ€ì 
    â†“                       â†“
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
         Chapter 4...
```

**êµ¬í˜„**:
```csharp
// ChapterGenerationManager.cs - ì£¼ìš” í”Œë˜ê·¸ë§Œ ìºì‹œ í‚¤ì— í¬í•¨
string GenerateCacheKey(int chapterId, GameStateSnapshot state)
{
    if (chapterId == 1) return $"{projectGuid}_Ch1";

    // ì£¼ìš” ì„ íƒ í”Œë˜ê·¸ë§Œ ì¶”ì¶œ
    string majorFlags = GetMajorFlagsForBranching(state);

    if (majorFlags == "none")
        return $"{projectGuid}_Ch{chapterId}";  // ê¸°ë³¸ ê²½ë¡œ

    return $"{projectGuid}_Ch{chapterId}_{majorFlags}";  // ë¶„ê¸° ê²½ë¡œ
}

// ì£¼ìš” í”Œë˜ê·¸ íŒë³„ (betrayed_, saved_, killed_, romance_ ë“±)
bool IsMajorFlag(string flag)
{
    string[] majorPrefixes = {
        "betrayed_", "saved_", "killed_", "romance_",
        "allied_", "rejected_", "revealed_", "sacrificed_"
    };
    return majorPrefixes.Any(prefix => flag.StartsWith(prefix));
}
```

**LLM í”„ë¡¬í”„íŠ¸ (Major Choice ìƒì„± ì§€ì¹¨)**:
```
**CRITICAL - Major Choice Flag System**:
- Use SPARINGLY (0-1 per chapter) to avoid branching explosion
- Major Flags cause future chapters to branch

**When to use Major Flags**:
âœ… Betraying a key character ("betrayed_Ellen")
âœ… Entering romance route ("romance_Alice")
âœ… Major plot decision ("saved_village")
âŒ Minor stat-affecting choices (no flag needed)

**Example - Major Choice**:
{
  "text": "Betray Ellen to save yourself",
  "flag_impact": [{"flag_name": "betrayed_Ellen", "value": true}],
  "affection_impact": [{"character_name": "Ellen", "change": -30}]
}
```

**íš¨ê³¼**:
- **ë¶„ê¸° ìˆ˜**: 7,776ê°œ â†’ **10-20ê°œ** (6ì±•í„° ê¸°ì¤€, ì£¼ìš” ì„ íƒ 0-1ê°œ/ì±•í„°)
- **ëª°ì…ê°**: âœ… ì£¼ìš” ì„ íƒì˜ ê²°ê³¼ê°€ ë‹¤ìŒ ì±•í„°ì— ì‹¤ì œë¡œ ë°˜ì˜ë¨
- **ìºì‹œ ì¬ì‚¬ìš©**: âœ… ê°™ì€ í”Œë˜ê·¸ ì¡°í•©ì´ë©´ ì¬ì‚¬ìš© (ì—¬ì „íˆ íš¨ìœ¨ì )
- **LLM í™œìš©**: âœ… ì´ë²¤íŠ¸ë³„ë¡œ ë‹¤ë¥¸ ìŠ¤í† ë¦¬/ëŒ€ì‚¬ ìƒì„±

**ë¹„êµ**:

| ì ‘ê·¼ë²• | ë¶„ê¸° ìˆ˜ | ëª°ì…ê° | ì„ íƒ ë¬´ê²Œ | êµ¬í˜„ ë³µì¡ë„ |
|--------|---------|--------|----------|------------|
| ì™„ì „ ìˆ˜ë ´ | 1ê°œ/ì±•í„° | âŒ íŒŒê´´ | âŒ ì—†ìŒ | ë‚®ìŒ |
| êµì°¨ ë¶„ê¸° | 32ê°œ | âš ï¸ ë³´í†µ | âš ï¸ ì ìˆ˜ ê¸°ì¤€ | ë†’ìŒ |
| **ì£¼ìš” ì„ íƒ ë¶„ê¸°** | **10-20ê°œ** | **âœ… ìœ ì§€** | **âœ… ì´ë²¤íŠ¸ ê¸°ë°˜** | **ì¤‘ê°„** |

---

## ğŸ’¡ í•µì‹¬ êµ¬í˜„

### 1. Scene-Based Chapter Generation

**ë¬¸ì œ**: Gemini APIì˜ ê¸´ ì¶œë ¥ì—ì„œ JSON ì˜ë¦¼ í˜„ìƒ ë°œìƒ

**í•´ê²°**: ì±•í„°ë¥¼ 6ê°œ ì”¬ìœ¼ë¡œ ë¶„í•  ìƒì„±
```csharp
// ChapterGenerationManager.cs
for (int scene = 1; scene <= 6; scene++)
{
    string prompt = BuildScenePrompt(chapterId, scene, totalScenes: 6,
                                     gameState, previousScenesContext);
    string jsonResponse = await GeminiAPI.GenerateContent(prompt);
    var records = AIDataConverter.FromAIJson(jsonResponse, chapterId);

    // ì”¬ ê°„ ìë™ ì—°ê²°
    ConnectScenes(allRecords, records);

    // ì´ì „ ì”¬ ì»¨í…ìŠ¤íŠ¸ ëˆ„ì 
    previousScenesContext += SummarizeScene(records);
}
```

**íš¨ê³¼**:
- JSON íŒŒì‹± ì„±ê³µë¥ : ~60% â†’ **~95%**
- ì•ˆì •ì ì¸ ê¸´ ì±•í„° ìƒì„± ê°€ëŠ¥

---

### 2. Core Value System

**ì„¤ê³„**: ì„ íƒì§€ â†’ Derived Skills â†’ Core Values (ìë™ í•©ì‚°)

```csharp
// GameController.cs
void OnChoiceSelected(int choiceIndex)
{
    // 1. Derived Skills ì¦ê°€
    foreach (var skill in derivedSkills)
    {
        if (choice.HasSkillImpact(skill))
        {
            gameState.skillScores[skill] += change;
        }
    }

    // 2. Core Values ì¬ê³„ì‚° (íŒŒìƒ ìŠ¤í‚¬ í•©ì‚°)
    RecalculateCoreValues();
    // ì˜ˆ: "ìš©ê¸°" = "ê²€ìˆ " + "ë°©ì–´" + "ëŒê²©"
}
```

**ì¥ì **:
- ì„ íƒì§€ê°€ ì—¬ëŸ¬ ìŠ¤í‚¬ì— ë™ì‹œ ì˜í–¥ ê°€ëŠ¥
- Core ValueëŠ” ìë™ ê³„ì‚°ë˜ì–´ ì¼ê´€ì„± ìœ ì§€
- AIê°€ ìŠ¤í‚¬ ì´ë¦„ë§Œ ì •í™•íˆ ì‚¬ìš©í•˜ë©´ ë¨

---

### 3. Parallel Asset Generation (Fan-Out Barrier)

**íŒ¨í„´**: ë³‘ë ¬ ì‘ì—… â†’ ë°°ë¦¬ì–´ â†’ ë‹¤ìŒ ë‹¨ê³„

```csharp
// ParallelAssetGenerator.cs
IEnumerator RunParallelAssetGeneration()
{
    // Cycle 1 & 2: ë³‘ë ¬ ì‹¤í–‰ (0% â†’ 50%)
    var cycle1 = StartCoroutine(GenerateAllStandingSprites());  // ìºë¦­í„° ìŠ¤íƒ ë”©
    var cycle2 = StartCoroutine(GenerateChapter1JSON());        // ì±•í„°1 ì‹œë‚˜ë¦¬ì˜¤

    yield return cycle1;
    yield return cycle2;
    // BARRIER (50%)

    // Cycle 3: ì±•í„°1 ì—ì…‹ ë³‘ë ¬ ìƒì„± (50% â†’ 100%)
    yield return RunCycle3(chapter1JSON);  // ë°°ê²½/CG/BGM/SFX
    // FINAL BARRIER (100%)

    SceneManager.LoadScene("GameScene");
}
```

**íš¨ê³¼**:
- ìˆœì°¨ ì‹¤í–‰ ëŒ€ë¹„ **~50% ì‹œê°„ ë‹¨ì¶•**
- ì´ ìƒì„± ì‹œê°„: ~6ë¶„ â†’ **~3ë¶„**

---

### 4. Chapter-Level Caching

**ì „ëµ**: ì±•í„° ë²ˆí˜¸ ê¸°ë°˜ ìºì‹± (ìƒíƒœ ë¬´ê´€)

```csharp
// ChapterGenerationManager.cs
string GenerateCacheKey(int chapterId, GameStateSnapshot state)
{
    // Chapter 1ì€ ëª¨ë“  í”Œë ˆì´ì–´ê°€ ë™ì¼
    if (chapterId == 1)
        return $"{projectGuid}_Ch1";

    // ë‹¤ë¥¸ ì±•í„°ë„ ë™ì¼ (Chapter-Level Convergence)
    return $"{projectGuid}_Ch{chapterId}";
}
```

**êµ¬ì¡°**:
```
ëª¨ë“  í”Œë ˆì´ì–´ â†’ ê°™ì€ Chapter 1 ë‚´ìš©
            â†“
     ì„ íƒì§€ A vs B
            â†“
  ìŠ¤í‚¬/í˜¸ê°ë„ë§Œ ì°¨ì´ (ëŒ€ì‚¬ëŠ” ë™ì¼)
            â†“
ëª¨ë“  í”Œë ˆì´ì–´ â†’ ê°™ì€ Chapter 2 ë‚´ìš©
```

**íš¨ê³¼**:
- ì¬í”Œë ˆì´ ì‹œ API ë¹„ìš© **0ì›** (ìºì‹œ ì¬ì‚¬ìš©)
- ë¡œë”© ì‹œê°„: ~30ì´ˆ â†’ **ì¦‰ì‹œ**

---

### 5. Character Speech Style System

**ê¸°ëŠ¥**: ìºë¦­í„°ë³„ ê³ ìœ  ë§íˆ¬ ìœ ì§€

```csharp
// CharacterData.cs
public class CharacterData : ScriptableObject
{
    [Header("Speech Style")]
    [TextArea(2, 4)]
    public string sampleDialogue; // "ì´ê±´ ë‚´ ë°©ì‹ì´ì•¼. ì´ê¸°ë“  ì§€ë“  ë‚´ ì„ íƒìœ¼ë¡œ."
}

// ChapterGenerationManager.cs - LLM í”„ë¡¬í”„íŠ¸
string characterList = $@"
- Player: {player.name}
  Speech Style: ""{player.sampleDialogue}""
- NPC: {npc.name}
  Speech Style: ""{npc.sampleDialogue}""
";
```

**íš¨ê³¼**:
- ìºë¦­í„°ë³„ ì¼ê´€ëœ ë§íˆ¬ ìœ ì§€
- LLMì´ ì„±ê²©ì— ë§ëŠ” ëŒ€ì‚¬ ìƒì„±

---

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### 1. ìš”êµ¬ì‚¬í•­
- Unity 2022.3.4f1 ì´ìƒ
- Gemini API í‚¤ ([ë°œê¸‰ë°›ê¸°](https://ai.google.dev/))
- (ì„ íƒ) NanoBanana API í‚¤
- (ì„ íƒ) ElevenLabs API í‚¤

### 2. í”„ë¡œì íŠ¸ ì„¤ì •

```bash
# 1. í´ë¡ 
git clone https://github.com/yourusername/Iyagi_AI_VN_Generator.git

# 2. Unityì—ì„œ í”„ë¡œì íŠ¸ ì—´ê¸°
# Unity Hub > Add > í”„ë¡œì íŠ¸ í´ë” ì„ íƒ

# 3. API í‚¤ ì„¤ì •
# Unity Editor > Iyagi > Create API Config
# Assets/Resources/APIConfig.asset ìƒì„±
# - geminiApiKey: "YOUR_KEY"
```

### 3. í”„ë¡œì íŠ¸ ìƒì„±

```
1. Unity Editor > Play Mode
2. SetupWizardScene ë¡œë“œ
3. [í…ŒìŠ¤íŠ¸ ëª¨ë“œ] F5 í‚¤ë¡œ ê° ë‹¨ê³„ ìë™ ì™„ì„±
4. [ì¼ë°˜ ëª¨ë“œ] ì§ì ‘ ì •ë³´ ì…ë ¥
5. Step 6 > "Create Project" í´ë¦­
6. ì•½ 3ë¶„ í›„ ìë™ìœ¼ë¡œ GameScene ë¡œë“œ
```

### 4. ê²Œì„ í”Œë ˆì´

```
1. TitleSceneì—ì„œ í”„ë¡œì íŠ¸ ì„ íƒ
2. SaveFile ì„ íƒ (ë˜ëŠ” New Game)
3. ê²Œì„ ì‹œì‘
```

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
Assets/
â”œâ”€â”€ Scenes/
â”‚   â”œâ”€â”€ TitleScene.unity              # íƒ€ì´í‹€ í™”ë©´
â”‚   â”œâ”€â”€ SetupWizardScene.unity        # í”„ë¡œì íŠ¸ ìƒì„± ìœ„ìë“œ
â”‚   â””â”€â”€ GameScene.unity               # ê²Œì„ í”Œë ˆì´ ì”¬
â”œâ”€â”€ Script/
â”‚   â”œâ”€â”€ Runtime/
â”‚   â”‚   â”œâ”€â”€ VNProjectData.cs          # í”„ë¡œì íŠ¸ ì„¤ì • (ScriptableObject)
â”‚   â”‚   â”œâ”€â”€ CharacterData.cs          # ìºë¦­í„° ë°ì´í„°
â”‚   â”‚   â”œâ”€â”€ GameController.cs         # ê²Œì„ ì§„í–‰ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ DialogueUI.cs             # ëŒ€ì‚¬ UI
â”‚   â”‚   â”œâ”€â”€ ChapterGenerationManager.cs  # ì±•í„° ìƒì„± ê´€ë¦¬ì
â”‚   â”‚   â”œâ”€â”€ AIDataConverter.cs        # AI JSON â†’ DialogueRecord ë³€í™˜
â”‚   â”‚   â””â”€â”€ GameStateSnapshot.cs      # ê²Œì„ ìƒíƒœ ìŠ¤ëƒ…ìƒ·
â”‚   â”œâ”€â”€ SetupWizard/
â”‚   â”‚   â”œâ”€â”€ SetupWizardManager.cs     # ìœ„ìë“œ ì „ì²´ ê´€ë¦¬
â”‚   â”‚   â”œâ”€â”€ Step1_GameOverview.cs     # ê²Œì„ ê°œìš” ì…ë ¥
â”‚   â”‚   â”œâ”€â”€ Step2_CoreValues.cs       # ê°€ì¹˜ ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ Step3_StoryStructure.cs   # êµ¬ì¡° ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ Step4_PlayerCharacter.cs  # í”Œë ˆì´ì–´ ìºë¦­í„°
â”‚   â”‚   â”œâ”€â”€ Step5_NPCs.cs             # NPC ìºë¦­í„°
â”‚   â”‚   â”œâ”€â”€ Step6_Finalize.cs         # ìµœì¢… í™•ì¸
â”‚   â”‚   â””â”€â”€ ParallelAssetGenerator.cs # ë³‘ë ¬ ì—ì…‹ ìƒì„±
â”‚   â””â”€â”€ API/
â”‚       â”œâ”€â”€ GeminiClient.cs           # Gemini API í´ë¼ì´ì–¸íŠ¸
â”‚       â”œâ”€â”€ NanoBananaClient.cs       # ì´ë¯¸ì§€ ìƒì„± API
â”‚       â””â”€â”€ ElevenLabsClient.cs       # ì˜¤ë””ì˜¤ ìƒì„± API
â””â”€â”€ Resources/
    â”œâ”€â”€ VNProjects/                   # ìƒì„±ëœ í”„ë¡œì íŠ¸ ë°ì´í„°
    â”œâ”€â”€ Generated/Characters/         # ìƒì„±ëœ ìºë¦­í„° ì´ë¯¸ì§€
    â”œâ”€â”€ Image/                        # ë°°ê²½/CG ì´ë¯¸ì§€
    â””â”€â”€ Sound/                        # BGM/SFX ì˜¤ë””ì˜¤
```

---

## ğŸ“Š ì„±ëŠ¥ ì§€í‘œ

| í•­ëª© | ìˆ˜ì¹˜ |
|------|------|
| **í”„ë¡œì íŠ¸ ìƒì„± ì‹œê°„** | ~10ë¶„ (ì…ë ¥ 5ë¶„ + ìƒì„± 3ë¶„ + ë¡œë“œ 2ë¶„) |
| **ì±•í„° ìƒì„± ì‹œê°„** | ~30ì´ˆ (ìºì‹œ ì—†ì„ ì‹œ), ì¦‰ì‹œ (ìºì‹œ ìˆì„ ì‹œ) |
| **JSON íŒŒì‹± ì„±ê³µë¥ ** | ~95% (Scene-based generation) |
| **ìºì‹œ ì¬ì‚¬ìš©ë¥ ** | 100% (ê°™ì€ ì±•í„° ë²ˆí˜¸) |
| **API ë¹„ìš©** | ~$0.50/ê²Œì„ (3ì±•í„° ê¸°ì¤€, Gemini 1.5 Flash) |

---

## ğŸ“š ë¬¸ì„œ

### ì‚¬ìš©ì ë¬¸ì„œ
- [SETUP_GUIDE.md](userdocs/SETUP_GUIDE.md) - í”„ë¡œì íŠ¸ ì„¤ì¹˜ ë° ì´ˆê¸° ì„¤ì •
- [SCENE_SETUP_GUIDE.md](userdocs/SCENE_SETUP_GUIDE.md) - ì”¬ ì„¤ì • ê°€ì´ë“œ

### ì‹œìŠ¤í…œ ë¬¸ì„œ
- [CLAUDE.md](CLAUDE.md) - ì „ì²´ ì‹œìŠ¤í…œ ê°œìš” ë° ê°œë°œì ê°€ì´ë“œ
- [GAME_CREATION_FLOW.md](GAME_CREATION_FLOW.md) - ìƒì„¸ ìƒì„± í”Œë¡œìš°
- [systemdocs/](systemdocs/) - ì„¸ë¶€ ì‹œìŠ¤í…œ ì„¤ê³„ ë¬¸ì„œ

### í¬íŠ¸í´ë¦¬ì˜¤
- [PORTFOLIO.md](PORTFOLIO.md) - ë°œí‘œìš© ìŠ¬ë¼ì´ë“œ ìë£Œ

---

## ğŸ¯ ì„¤ê³„ ì›ì¹™

### 1. State-Aware Single-Agent Architecture
- ë©€í‹°ì—ì´ì „íŠ¸ ëŒ€ì‹  **ë‹¨ì¼ LLM + ìƒíƒœ ì»¨í…ìŠ¤íŠ¸** í™œìš©
- ìŠ¤í† ë¦¬ëŠ” ìˆœì°¨ì  íë¦„ì´ ì¤‘ìš” â†’ ë‹¨ì¼ ì—ì´ì „íŠ¸ê°€ ë” ì í•©
- ë³µì¡í•œ ì—ì´ì „íŠ¸ í˜‘ì—… ëŒ€ì‹  **í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§**ìœ¼ë¡œ ì œì–´

### 2. Chapter-Level Convergence
- ë¶„ê¸° í­ë°œ ë°©ì§€: ëª¨ë“  í”Œë ˆì´ì–´ê°€ ê°™ì€ ì±•í„° ê²½í—˜
- ì„ íƒì§€ëŠ” **ê´€ê³„/ê°€ì¹˜ê´€**ì—ë§Œ ì˜í–¥, ë©”ì¸ í”Œë¡¯ì€ ê³ ì •
- ì—”ë”©ë§Œ ë¶„ê¸° (4-8ê°œ ì—”ë”©)

### 3. Deterministic Caching
- ê°™ì€ ì…ë ¥ â†’ ê°™ì€ ì¶œë ¥ ë³´ì¥
- ì±•í„° ë²ˆí˜¸ë§Œìœ¼ë¡œ ìºì‹œ í‚¤ ìƒì„±
- ì¬í”Œë ˆì´ ì‹œ API ë¹„ìš© ì œë¡œ

### 4. Fail-Safe Design
- JSON íŒŒì‹± ì‹¤íŒ¨ ì‹œ ìë™ ë³µêµ¬ ì‹œë„
- ë¶ˆì™„ì „í•œ ì‘ë‹µ ì²˜ë¦¬ (ë§ˆì§€ë§‰ ì™„ì„±ëœ ê°ì²´ê¹Œì§€ ì‚¬ìš©)
- ì±•í„° ìƒì„± ì¤‘ UI ì°¨ë‹¨ìœ¼ë¡œ ì˜ë„ì¹˜ ì•Šì€ ë™ì‘ ë°©ì§€

---

## ğŸ” ì£¼ìš” ê°œì„  ì´ë ¥

### 2025-01-13: Character Speech Style System
- ìºë¦­í„°ë³„ ë§íˆ¬ ì˜ˆì‹œ ì…ë ¥ ê¸°ëŠ¥ ì¶”ê°€
- LLM í”„ë¡¬í”„íŠ¸ì— ë§íˆ¬ ìƒ˜í”Œ í¬í•¨í•˜ì—¬ ì¼ê´€ëœ ëŒ€ì‚¬ ìƒì„±

### 2025-01-11: Core Value System Redesign
- ì„ íƒì§€ê°€ Derived Skillsì—ë§Œ ì˜í–¥
- Core Value = Derived Skills í•©ê³„ë¡œ ìë™ ê³„ì‚°
- ë” ì§ê´€ì ì´ê³  ì¼ê´€ëœ ê°€ì¹˜ê´€ ì‹œìŠ¤í…œ

### 2025-01-11: Scene-Based Chapter Generation
- ì±•í„°ë¥¼ 6ê°œ ì”¬ìœ¼ë¡œ ë¶„í•  ìƒì„±
- JSON íŒŒì‹± ì„±ê³µë¥  ëŒ€í­ í–¥ìƒ (~60% â†’ ~95%)
- ì•ˆì •ì ì¸ ê¸´ ì±•í„° ìƒì„± ê°€ëŠ¥

### 2025-01-11: SaveFile Auto-Update
- ì±•í„° ì™„ë£Œ ì‹œ ìë™ìœ¼ë¡œ SaveFile ì—…ë°ì´íŠ¸
- ì €ì¥ ë‚´ìš©: currentChapter, gameState, lastPlayedDate

---

## ğŸ¤ ê¸°ì—¬

ì´ í”„ë¡œì íŠ¸ëŠ” AI ê¸°ë°˜ ì½˜í…ì¸  ìƒì„± ì‹œìŠ¤í…œì˜ ì‹¤í—˜ì  êµ¬í˜„ì…ë‹ˆë‹¤.
í”¼ë“œë°±ì´ë‚˜ ê°œì„  ì œì•ˆì€ Issueë¥¼ í†µí•´ ë¶€íƒë“œë¦½ë‹ˆë‹¤.

---

## ğŸ“ ë¼ì´ì„ ìŠ¤

MIT License

---

## ğŸ‘¤ ì‘ì„±ì

**YuliSpiel**

í¬íŠ¸í´ë¦¬ì˜¤: [PORTFOLIO.md](PORTFOLIO.md) ì°¸ì¡°

---

**Last Updated**: 2025-01-13
**Version**: 1.0.0
